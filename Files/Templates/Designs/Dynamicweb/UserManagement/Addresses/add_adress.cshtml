@inherits Dynamicweb.Rendering.RazorTemplateBase<Dynamicweb.Rendering.RazorTemplateModel<Dynamicweb.Rendering.Template>>

<h2>
    @if (!string.IsNullOrWhiteSpace(GetString("UserManagement:User.ManageAddresses.AddAddress")))
    {
        <text>@Translate("Add_address", "Add address")</text>
    }
    else if (!string.IsNullOrWhiteSpace(GetString("UserManagement:User.ManageAddresses.UpdateAddress")))
    {
        <text>@Translate("Update_address", "Update address")</text>
    }
</h2>

@using System.Text.RegularExpressions;
@functions{
    private static Regex _valueRegex = new Regex(@"value=(?:'(?<value>[^']*)'|""(?<value>[^""]*)"")", RegexOptions.Compiled | RegexOptions.IgnoreCase);

    private string GetControlValue(string key)
    {
        var match = _valueRegex.Match(GetString(key));
        if (match.Success)
        {
            return match.Groups["value"].ToString();
        }
        return "";
    }
}

<pre>
@System.Net.WebUtility.HtmlEncode(GetString("UserManagement:User.UserAddress.Description"))
@GetControlValue("UserManagement:User.UserAddress.Description")
</pre>

@GetValue("UserManagement:User.ManageAddresses.FormStart")
<div class="form-horizontal" role="form">
    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("Description", "Description")</label>
        <div class="col-sm-10">
            <input type="text" name="Description" id="Description" value='@GetControlValue("UserManagement:User.UserAddress.Description")' class="form-control" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("Address", "Address")</label>
        <div class="col-sm-10">


            <input type="text" name="Address" id="Address" value='@GetControlValue("UserManagement:User.UserAddress.Address")' class="form-control" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("Address2", "Address2")</label>
        <div class="col-sm-10">

            <input type="text" name="Address2" id="Address2" value='@GetControlValue("UserManagement:User.UserAddress.Address2")' class="form-control" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("Zip_code", "Zip code")</label>
        <div class="col-sm-10">

            <input type="text" name="Zip" id="Zip" value='@GetControlValue("UserManagement:User.UserAddress.Zip")' class="form-control" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("City", "City")</label>
        <div class="col-sm-10">

            <input type="text" name="City" id="City" value='@GetControlValue("UserManagement:User.UserAddress.City")' class="form-control" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("State", "State")</label>
        <div class="col-sm-10">
            <input type="text" name="State" id="State" value='@GetControlValue("UserManagement:User.UserAddress.State")' class="form-control" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("Country", "Country")</label>
        <div class="col-sm-10">
            <input type="text" name="Country" id="Country" value='@GetControlValue("UserManagement:User.UserAddress.Country")' class="form-control" />
        </div>
    </div>

    <div class="form-group">
        <label class="col-sm-2 control-label">@Translate("Default", "Default")</label>
        <div class="col-sm-10">
            @if (!string.IsNullOrWhiteSpace(GetString("UserManagement:User.ManageAddresses.UpdateAddress")))
            {
                if (GetString("UserManagement:User.UserAddress.Default").Contains("checked"))
                {
                    <td>
                        <input type="checkbox" id="Default" name="Default" checked="checked" />
                    </td>
                }
                else
                {
                    <td><input type="checkbox" id="Default" name="Default" /></td>
                }
            }
            else
            {
                <td>
                    <input type="checkbox" id="Default" name="Default" />
                </td>
            }
        </div>
    </div>

    <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            @if (!string.IsNullOrWhiteSpace(GetString("UserManagement:User.ManageAddresses.DetailUrl")))
            {
                <a href="@GetValue("UserManagement:User.ManageAddresses.DetailUrl")" class="btn btn-default">@Translate("Back_to_addresses", "Back to addresses")</a>
            }
            @if (!string.IsNullOrWhiteSpace(GetString("UserManagement:User.ManageAddresses.AddAddress")))
            {
                <button class="btn btn-primary" type="submit">@Translate("Add_address", "Add address")</button>
            }
            else if (!string.IsNullOrWhiteSpace(GetString("UserManagement:User.ManageAddresses.UpdateAddress")))
            {
                <button class="btn btn-primary" type="submit">@Translate("Update_address", "Update address")</button>
            }
        </div>
    </div>
</div>
@GetValue("UserManagement:User.ManageAddresses.FormEnd")
