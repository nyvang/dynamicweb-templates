@inherits Dynamicweb.Rendering.RazorTemplateBase<Dynamicweb.Rendering.RazorTemplateModel<Dynamicweb.Rendering.Template>>

<script type="text/javascript" src="/Admin/Content/JsLib/prototype-1.6.1.js"></script>
<script type="text/javascript" src="/Files/Templates/ItemPublisher/Edit/edit.js"></script>


@functions{
    public String findField(String input)
    {
        String[] field = ((input.Split(' ')[3]).Split('>')[1]).Split('<');
        return field[0];
    }
    public String findName(String input)
    {
        String[] field = (input.Split(' ')[8]).Split('>');
        return field[1];
    }
    public String findRequired(String input)
    {
        String[] field = ((input.Split(' ')[10]).Split('=')[1]).Split('>');
        return field[0];
    }
    public String findValue(String input)
    {
        String[] field = ((input.Split(' ')[18]).Split('=')[1]).Split('/');
        return field[0];
    }
}
<div class="items">
    <div class="item-edit-form">
        <form method="post" role="form">
            <input type="hidden" name="Continue" value="/Default.aspx?ID=@GetValue("ItemPublisher:Global.PageId")&amp;PID=@GetValue("ItemPublisher:Global.ParagraphId")" />




            <h2>@findField(GetString("ItemPublisher:Edit.Form")) </h2>



            <label class="item-edit-field-label">
                @findName(GetString("ItemPublisher:Edit.Form"))

                <span class=@findRequired(GetString("ItemPublisher:Edit.Form"))>*</span></label>

            <input class="std item-field form-control" name="Name" type="text" required="required" value=@findValue(GetString("ItemPublisher:Edit.Form"))  />








            @foreach (LoopItem i in GetLoop("ValidationErrors"))
            {
                @i.GetValue("HeaderStart")
                <div class="validation-error">
                    @Translate("Error_saving_item", "Error saving item")
                    <ul>
                        @i.GetValue("HeaderEnd")
                        <li>@i.GetValue("ItemPublisher:Edit.Validation.FieldName"): @i.GetValue("ItemPublisher:Edit.Validation.Error")</li>
                        @i.GetValue("FooterStart")
                    </ul>
                </div>
                @i.GetValue("FooterEnd")
            }
            <br />

            <div class="item-edit-submission">
                <input type="button" class="btn btn-default" value="Cancel" />
                <input type="submit" class="btn btn-default" value="Save changes" />
            </div>

            <div class="items-clear"></div>
        </form>
    </div>
</div>


<script type="text/javascript">
    $(document).observe('dom:loaded', function () {
        Dynamicweb.Items.ItemPublishing.get_current().initialize();
    });
</script>
<!--Mangler:
    - Navnet på det item der redigeres
    - data der skal i input felterne, field-group, name of field, if required field, value of field
    - Url til den side vi kom fra (itemlist/item) til tilbageknap
   Spørgsmål: skal der være så mange div tags omkring inputfelterne (5 stk)?
 -->
